/*! For license information please see 813.c37a8cf57cd2ded27820.js.LICENSE.txt */
"use strict";(self.webpackChunkconsoledot=self.webpackChunkconsoledot||[]).push([[813],{5044:(e,t,n)=>{n.d(t,{Z:()=>Ce});var r,a,s,o=n(2322),i=n(4119),l=n(1832),c=n(9961),u=n(2586),d=n(2820),h=n(5194),p=n(8371),m=n(6460),f=n(694),g=n(3026),v=n(8460),y=n(6598),j=n(7784),b=n(2429),x=n(409),C=n(8063),w=n(2468),S=n(112),O=Object.defineProperty,P=(e,t,n)=>(((e,t,n)=>{t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),k={},U={};({get exports(){return k},set exports(e){k=e}}).exports=function(){if(s)return U;s=1,function(){if(a)return r;a=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}()?Object.assign:function(r,a){for(var s,o,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(r),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))t.call(s,c)&&(i[c]=s[c]);if(e){o=e(s);for(var u=0;u<o.length;u++)n.call(s,o[u])&&(i[o[u]]=s[o[u]])}}return i}}();var e=d,t=60103;if(U.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;t=n("react.element"),U.Fragment=n("react.fragment")}var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,r){var a,s={},c=null,u=null;for(a in void 0!==r&&(c=""+r),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)i.call(n,a)&&!l.hasOwnProperty(a)&&(s[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===s[a]&&(s[a]=n[a]);return{$$typeof:t,type:e,key:c,ref:u,props:s,_owner:o.current}}return U.jsx=c,U.jsxs=c,U}();class R{async get(e){const{totalSeats:t,availableSeats:n}=await(await fetch("/aw-api/subscriptions")).json();return{total:t,available:n}}async seats({orgId:e,serviceId:t},n){return(await(await fetch("/aw-api/users")).json()).users.map((({username:e,firstName:t,lastName:n})=>({id:e,name:`${t} ${n}`})))}assign(e,t){return Promise.resolve()}unAssign(e,t){return Promise.resolve()}}var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_={},I={},E={};!function(e){function t(e,t=","){return(n,...r)=>n.reduce(((n,a,s)=>`${n}${a}${((n,r)=>{const a=e[r%e.length];return typeof n>"u"?"":"object"==typeof n?Array.isArray(n)?n.map(a).join(t):Object.entries(n).reduce(((e,t)=>[...e,...t]),[]).map(a).join(t):a(String(n))})(r[s],s)}`),"")}Object.defineProperty(e,"__esModule",{value:!0}),e.joinUrl=e.stripUndefined=e.delimited=e.encode=e.allowReserved=e.encodeReserved=void 0,e.encodeReserved=[encodeURIComponent,encodeURIComponent],e.allowReserved=[encodeURIComponent,encodeURI],e.encode=t,e.delimited=function(n=","){return(r,a=e.encodeReserved)=>Object.entries(r).filter((([,e])=>void 0!==e)).map((([e,r])=>t(a,n)`${e}=${r}`)).join("&")},e.stripUndefined=function(e){return e&&JSON.parse(JSON.stringify(e))},e.joinUrl=function(...e){return e.filter(Boolean).map(((e,t)=>0===t?e:e.replace(/^\/+/,""))).map(((e,t,n)=>t===n.length-1?e:e.replace(/\/+$/,""))).join("/")}}(E),Object.defineProperty(I,"__esModule",{value:!0}),I.space=I.pipe=I.form=I.json=F=I.explode=I.deep=$=I.query=void 0;const T=E;var $=I.query=function(...e){const t=e.filter(Boolean).join("&");return t&&`?${t}`};I.deep=function(e,[t,n]=T.encodeReserved){const r=(0,T.encode)([e=>e,t]),a=(0,T.encode)([e=>e,n]),s=(e,t="")=>Object.entries(e).filter((([,e])=>void 0!==e)).map((([n,o])=>{const i=Array.isArray(e)?"":n,l=t?r`${t}[${i}]`:n;return"object"==typeof o?s(o,l):a`${l}=${o}`})).join("&");return s(e)};var F=I.explode=function e(t,n=T.encodeReserved){const r=(0,T.encode)(n);return Object.entries(t).filter((([,e])=>void 0!==e)).map((([t,a])=>Array.isArray(a)?a.map((e=>r`${t}=${e}`)).join("&"):"object"==typeof a?e(a,n):r`${t}=${a}`)).join("&")};I.json=function(e,t=T.encodeReserved){const n=(0,T.encode)(t);return Object.entries(e).filter((([,e])=>void 0!==e)).map((([e,t])=>{const r=JSON.stringify(t);return n`${e}=${r}`})).join("&")},I.form=(0,T.delimited)(),I.pipe=(0,T.delimited)("|"),I.space=(0,T.delimited)("%20");var N={};!function(e){var t=A&&A.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,i)}l((r=r.apply(e,t||[])).next())}))};function n(n){return t(this,void 0,void 0,(function*(){const t=yield n;if(e.SUCCESS_CODES.some((e=>e==t.status)))return t.data;throw new a(t.status,t.data,t.headers)}))}function r(e){return(...t)=>n(e(...t))}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpError=e.optimistic=e.okify=e.ok=e.SUCCESS_CODES=e.handle=void 0,e.handle=function(e,n){return t(this,void 0,void 0,(function*(){const{status:t,data:r,headers:s}=yield e,o=n[t];if(o)return o(r);if(n.default)return n.default(t,r);throw new a(t,r,s)}))},e.SUCCESS_CODES=[200,201,202,204],e.ok=n,e.okify=r,e.optimistic=function(e){const t={};return Object.entries(e).forEach((([e,n])=>{t[e]="function"==typeof n?r(n):n})),t};class a extends Error{constructor(e,t,n){super(`Error: ${e}`),this.status=e,this.data=t,this.headers=n}}e.HttpError=a}(N);var z=A&&A.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),B=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),D=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&z(t,e,n);return B(t,e),t},L=A&&A.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,i)}l((r=r.apply(e,t||[])).next())}))},J=A&&A.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(_,"__esModule",{value:!0});var M=_.runtime=void 0;const q=D(I),H=E,V=N,K=(M=_.runtime=function(e){function t(e,t){return L(this,void 0,void 0,(function*(){const r=yield n(e,t);let a;try{a=yield r.text()}catch{}return{status:r.status,headers:r.headers,contentType:r.headers.get("content-type"),data:a}}))}function n(t,n={}){return L(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},e),n),{baseUrl:a,headers:s,fetch:o}=r,i=J(r,["baseUrl","headers","fetch"]),l=(0,H.joinUrl)(a,t);return yield(o||fetch)(l,Object.assign(Object.assign({},i),{headers:(0,H.stripUndefined)(Object.assign(Object.assign({},e.headers),s))}))}))}return{ok:V.ok,fetchText:t,fetchJson:function(e,n={}){return L(this,void 0,void 0,(function*(){const{status:r,headers:a,contentType:s,data:o}=yield t(e,Object.assign(Object.assign({},n),{headers:Object.assign({Accept:"application/json"},n.headers)}));return s&&s.includes("json")?{status:r,headers:a,data:o?JSON.parse(o):null}:{status:r,headers:a,data:o}}))},fetchBlob:function(e,t={}){return L(this,void 0,void 0,(function*(){const r=yield n(e,t);let a;try{a=yield r.blob()}catch{}return{status:r.status,headers:r.headers,data:a}}))},json(e){var{body:t,headers:n}=e,r=J(e,["body","headers"]);return Object.assign(Object.assign(Object.assign({},r),null!=t&&{body:JSON.stringify(t)}),{headers:Object.assign(Object.assign({},n),{"Content-Type":"application/json"})})},form(e){var{body:t,headers:n}=e,r=J(e,["body","headers"]);return Object.assign(Object.assign(Object.assign({},r),null!=t&&{body:q.form(t)}),{headers:Object.assign(Object.assign({},n),{"Content-Type":"application/x-www-form-urlencoded"})})},multipart(t){var{body:n}=t,r=J(t,["body"]);if(null==n)return r;const a=new(e.formDataConstructor||r.formDataConstructor||FormData);return Object.entries(n).forEach((([e,t])=>{a.append(e,t)})),Object.assign(Object.assign({},r),{body:a})}}})({baseUrl:"https://ciam-authz-hw-ciam-authz--runtime-ext.apps.ext.spoke.preprod.us-east-1.aws.paas.redhat.com/"});class Z{constructor(e){P(this,"opts",{headers:{Authorization:"token"}}),this.opts.baseUrl=e||""}async get({orgId:e,serviceId:t}){const n=await function(e,t,n){return K.ok(K.fetchJson(`/v1alpha/orgs/${encodeURIComponent(e)}/licenses/${encodeURIComponent(t)}`,{...n}))}(e,t,this.opts);return{available:n.seatsAvailable||0,total:n.seatsTotal||0}}async seats({orgId:e,serviceId:t},n=!0){var r;return(null==(r=(await function(e,t,{includeUsers:n,filter:r}={},a){return K.ok(K.fetchJson(`/v1alpha/orgs/${encodeURIComponent(e)}/licenses/${encodeURIComponent(t)}/seats${$(F({includeUsers:n,filter:r}))}`,{...a}))}(e,t,{filter:n?"assigned":"assignable"},this.opts)).users)?void 0:r.map((({id:e,displayName:t,assigned:n})=>({id:e||"",name:t||"",assigned:!!n}))))||[]}async assign(e,t){const n={assign:t};await this.modify(e,n)}async unAssign(e,t){const n={unassign:t};await this.modify(e,n)}async modify({orgId:e,serviceId:t},n){return function(e,t,n,r){return K.ok(K.fetchJson(`/v1alpha/orgs/${encodeURIComponent(e)}/licenses/${encodeURIComponent(t)}`,K.json({...r,method:"POST",body:n})))}(e,t,n,this.opts)}}const Y=M({baseUrl:"/api/entitlements/v1/"});function W({limit:e,offset:t}={},n){return Y.ok(Y.fetchJson(`/seats${$(F({limit:e,offset:t}))}`,{...n}))}class G{constructor(e){P(this,"baseUrl"),this.baseUrl=e||""}async header(e){return{headers:{Authorization:`Bearer ${await e.token()}`,baseUrl:this.baseUrl}}}async get(e){const t=await W({limit:10,offset:0},await this.header(e));return{available:t.allowed||0,total:t.consumed||0}}async seats(e,t){return(await W({limit:10,offset:0},await this.header(e))).data.map((({subscription_id:e,account_username:t})=>({id:e||"",name:t||"",assigned:!0})))}async assign(e,t){return await Promise.all(t.map((async t=>function(e,t){return Y.ok(Y.fetchJson("/seats",Y.json({...t,method:"POST",body:e})))}({account_username:t},await this.header(e))))),Promise.resolve()}async unAssign(e,t){return await Promise.all(t.map((async t=>function(e,t){return Y.ok(Y.fetchJson(`/seats/${encodeURIComponent(e)}`,{...t,method:"DELETE"}))}(t,await this.header(e))))),Promise.resolve()}}function Q(e,t){switch(e){case"CIAM_Authz":return new Z(t);case"entitlements":return new G(t);case"mock":return new R;default:throw new Error("no implementation found for "+e)}}const X=(0,d.createContext)(void 0),ee=()=>function(e){const t=(0,d.useContext)(e);if(null!=t)return t;throw new Error("No provider found for context, make sure it is included in your component hierarchy.")}(X),te=({serviceName:e,baseUrl:t,children:n})=>k.jsx(X.Provider,{value:Q(e,t),children:n}),ne=({onClearAllFilters:e})=>k.jsxs(p.EmptyState,{variant:p.EmptyStateVariant.xs,children:[k.jsx(p.EmptyStateIcon,{icon:x.W1}),k.jsx(p.Title,{headingLevel:"h2",size:"lg",children:"No results found"}),k.jsxs(p.EmptyStateBody,{children:["Adjust your filters and try again, or ",k.jsx("a",{onClick:e,children:"clear all filters"}),"."]})]}),re=["name"],ae={name:"Display name"},se=({users:e,itemCount:t,page:n,perPage:r,usernames:a,isColumnSortable:s,isUserChecked:o,onPageChange:i,onSearchUsername:l,onRemoveUsernameChip:c,onRemoveUsernameChips:u,onClearAllFilters:d,onCheckUser:h})=>{const p=a.length>0;return k.jsx(g.H,{data:e,columns:re,renderHeader:({column:e,Th:t,key:n})=>k.jsx(t,{children:ae[e]},n),renderCell:({column:e,row:t,Td:n,key:r})=>k.jsx(n,{dataLabel:ae[e],children:t[e]},r),isColumnSortable:s,isRowChecked:({row:e})=>o(e),onCheck:({row:e},t)=>h(e,t),toolbarBreakpoint:"lg",filters:{Username:{type:"search",chips:a,onSearch:l,onRemoveChip:c,onRemoveGroup:u,validate:e=>/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e),errorMessage:"Invalid string"}},itemCount:t,page:n,perPage:r,onPageChange:i,onClearAllFilters:d,ariaLabel:"Seats Administration users",isFiltered:p,emptyStateNoData:k.jsx(k.Fragment,{}),emptyStateNoResults:k.jsx(ne,{onClearAllFilters:d})})},oe=({user:e,onSuccess:t,onError:n})=>{var r,a,s,o,i;const l=(0,h.useHistory)(),c=ee(),u=()=>l.push("/"),m=(0,j.a)({queryKey:["subscriptions"],queryFn:()=>c.get(e)}),{page:f,perPage:g,setPagination:x,setPaginationQuery:C}=(0,v.J)(),w=(0,d.useCallback)((()=>C(1,g)),[g,C]),S=(0,y.R)("name",w),O=(0,j.a)({queryKey:["availableUsers",{page:f,perPage:g,usernames:S.chips}],queryFn:()=>c.seats(e,!1)}),{mutate:P,isLoading:U}=(0,b.D)((()=>c.assign(e,R)),{onSuccess:()=>{u(),t("Successfully assigned users")},onError:e=>{n("there was an error: "+e)}}),[R,A]=(0,d.useState)([]),_=((null==(r=m.data)?void 0:r.total)||0)-((null==(a=m.data)?void 0:a.available)||0),I=void 0===(null==(s=m.data)?void 0:s.total)||!(R.length>0)||R.length+_>m.data.total;return k.jsxs(p.Modal,{isOpen:!0,title:"Assign users",variant:"medium",onClose:u,actions:[k.jsx(p.Button,{onClick:()=>P(),isDisabled:I,isLoading:U,children:"Assign"},"assign"),k.jsx(p.Button,{onClick:u,variant:p.ButtonVariant.link,children:"Cancel"},"cancel")],children:[R.length+_>((null==(o=m.data)?void 0:o.total)||0)&&k.jsx(p.Alert,{variant:"warning",isInline:!0,title:"Your organization does not have enough Project Wisdom seats for the assignments below"}),k.jsx(se,{users:O.data,itemCount:null==(i=O.data)?void 0:i.length,page:f,perPage:g,onPageChange:x,usernames:S.chips,onSearchUsername:S.add,onRemoveUsernameChip:S.remove,onRemoveUsernameChips:S.clear,onClearAllFilters:S.clear,isUserChecked:e=>R.includes(e.id),onCheckUser:(e,t)=>{A(t?[...R,e.id]:R.filter((t=>t!==e.id)))}})]})},ie=()=>k.jsx(p.Icon,{status:"danger",size:"xl",children:k.jsx(C.$O,{})}),le=()=>k.jsxs(p.EmptyState,{isFullHeight:!0,children:[k.jsx(p.EmptyStateIcon,{component:ie,variant:"container"}),k.jsx(p.Title,{headingLevel:"h2",size:"lg",children:"Your organization no longer has an Seats Administration subscription."}),k.jsx(p.EmptyStateBody,{children:"Please contact Red Hat if there is an issue with your subscription or if you wish to continue."})]}),ce=({usersToRemove:e,onOk:t})=>k.jsxs(p.Modal,{id:"remove-users-modal",variant:p.ModalVariant.small,isOpen:!0,"aria-label":"Remove users from seats",title:"Remove users from seats",titleIconVariant:"warning",showClose:!1,"aria-describedby":"modal-message",actions:[k.jsx(p.Button,{onClick:t,variant:p.ButtonVariant.primary,children:"Ok"},1)],children:["Your organization has decreased the amount of seats available. Please remove ",e," users from their seats to continue the subscription."]}),ue=({availableSeats:e,totalSeats:t})=>k.jsx(p.PageSection,{variant:"light",hasShadowBottom:!0,children:k.jsxs(p.TextContent,{children:[k.jsx(p.Title,{headingLevel:"h1",children:"Seats Administration"}),k.jsxs(p.Level,{children:[k.jsx(p.LevelItem,{children:k.jsx(p.Text,{children:"This group contains all users assigned seats within your organization."})}),t>0&&k.jsx(p.LevelItem,{children:k.jsxs(p.Text,{children:["Seats available: ",k.jsxs(p.Label,{isCompact:!0,children:[e," of ",t]})]})})]})]})}),de=({totalSeats:e,onAddUsers:t})=>k.jsxs(p.EmptyState,{isFullHeight:!0,children:[k.jsx(p.EmptyStateIcon,{icon:w.wl}),k.jsxs(p.Title,{headingLevel:"h2",size:"lg",children:["There are currently no users in your organization assigned seats.",k.jsx("br",{}),"Your organization has ",e," seats available."]}),k.jsx(p.EmptyStateBody,{children:"Please add users by using the button below."}),k.jsx(p.Button,{ouiaId:"button-create",variant:"primary",onClick:()=>t(),children:"Add users"})]}),he=["name"],pe={name:"Username"},me=({users:e,itemCount:t,page:n,perPage:r,usernames:a,totalSeats:s,getUrlForUser:o,isColumnSortable:i,canAddUser:l,isUserChecked:c,onCheckUser:u,onPageChange:d,onRemoveSeat:m,onAddUser:f,onSearchUsername:v,onRemoveUsernameChip:y,onRemoveUsernameChips:j,onClearAllFilters:b})=>{const x=a.length>0;return k.jsx(g.H,{data:e,columns:he,renderHeader:({column:e,Th:t,key:n})=>k.jsx(t,{children:pe[e]},n),renderCell:({column:e,row:t,Td:n,key:r})=>k.jsx(n,{dataLabel:pe[e],children:"name"===e?k.jsx(p.Button,{variant:"link",component:e=>k.jsx(h.Link,{to:o(t),...e,children:t.name}),isInline:!0}):t[e]},r),renderActions:({row:e})=>k.jsx(S.ActionsColumn,{rowData:fe,items:[{title:"Remove seat",onClick:()=>m(e)}]}),isColumnSortable:i,toolbarBreakpoint:"lg",filters:{Username:{type:"search",chips:a,onSearch:v,onRemoveChip:y,onRemoveGroup:j,validate:e=>/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e),errorMessage:"Invalid string"}},actions:[...l?[{label:"Assign user(s)",onClick:f,isPrimary:!0}]:[],{label:"Remove user(s)",onClick:()=>m(),isPrimary:!1}],itemCount:t,page:n,perPage:r,onPageChange:d,onClearAllFilters:b,ariaLabel:"Seats Administration users",isFiltered:x,isRowChecked:({row:e})=>c(e),onCheck:({row:e},t)=>u(e,t),emptyStateNoData:k.jsx(de,{totalSeats:s||0,onAddUsers:f}),emptyStateNoResults:k.jsx(ne,{onClearAllFilters:b})})},fe={actionProps:{style:{zIndex:9999}}},ge=({users:e,onConfirm:t,onCancel:n})=>{const[r,a]=(0,d.useState)(e.slice(0,5)),[s,o]=(0,d.useState)(5),[i,l]=(0,d.useState)(1);return k.jsxs(p.Modal,{title:"Remove users",titleIconVariant:"warning",isOpen:!0,variant:"small",actions:[k.jsx(p.Button,{variant:"danger",onClick:()=>t(),children:"Remove user(s)"}),k.jsx(p.Button,{variant:"link",onClick:()=>n(),children:"Cancel"})],onClose:n,children:["Are you sure you want to remove the user(s) below from Project Wisdom",e.length>5?k.jsxs(k.Fragment,{children:[k.jsxs(S.TableComposable,{variant:"compact",children:[k.jsx(S.Thead,{children:k.jsx(S.Tr,{children:k.jsx(S.Th,{children:"Name"})})}),k.jsx(S.Tbody,{children:r.map((e=>k.jsx(S.Tr,{children:k.jsx(S.Td,{dataLabel:"Name",children:e.name})},e.id)))})]}),k.jsx(p.Pagination,{isCompact:!0,perPageComponent:"button",itemCount:e.length,perPage:s,page:i,variant:p.PaginationVariant.bottom,perPageOptions:[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20}],onPerPageSelect:(t,n)=>{o(n),a(e.slice((i-1)*n,i*n))},onSetPage:(t,n)=>{l(n),a(e.slice((n-1)*s,n*s))}})]}):k.jsx("p",{className:"pf-u-pt-md",children:e.map(((t,n)=>k.jsxs(k.Fragment,{children:[k.jsx("b",{children:t.name}),n!==e.length-1?", ":""]})))})]})},ve=({user:e,onSuccess:t,onError:n})=>{var r,a,s,o,i,l,c,u,m,f;const g=(0,h.useHistory)(),[x,C]=(0,d.useState)([]),[w,S]=(0,d.useState)(!1),{page:O,perPage:P,setPagination:U,setPaginationQuery:R}=(0,v.J)(),A=(0,d.useCallback)((()=>R(1,P)),[P,R]),_=(0,y.R)("username",A),I=ee(),E=(0,j.a)({queryKey:["subscriptions"],queryFn:()=>I.get(e)}),T=(0,j.a)({queryKey:["users",{page:O,perPage:P,usernames:_.chips}],queryFn:()=>I.seats(e)}),$=((null==(r=E.data)?void 0:r.available)||0)<0,F=Math.abs((null==(a=E.data)?void 0:a.available)||0),N=((null==(s=E.data)?void 0:s.total)||0)>0&&0===(null==(o=E.data)?void 0:o.available),{mutate:z}=(0,b.D)((async t=>{await I.unAssign(e,t.map((({id:e})=>e))),S(!1),C([])}),{onSuccess:()=>{t&&t("Successfully removed users")},onError:e=>{n&&n("there was an error: "+e)}});return k.jsxs(p.Page,{children:[k.jsx(ue,{totalSeats:(null==(i=E.data)?void 0:i.total)||0,availableSeats:(null==(l=E.data)?void 0:l.available)||0}),0===(null==(c=E.data)?void 0:c.total)&&k.jsx(le,{}),$&&F&&k.jsx(ce,{usersToRemove:F,onOk:()=>g.push("/remove-users")}),w&&k.jsx(ge,{users:x,onConfirm:()=>z(x),onCancel:()=>S(!1)}),k.jsxs(p.PageSection,{isFilled:!0,children:[N?k.jsx(p.Alert,{title:"There are 0 seats left in your organization's subscription. Contact Red Hat to manage your Seats Administration license.",variant:"warning",isInline:!0}):null,0!==(null==(u=E.data)?void 0:u.total)&&k.jsx(me,{totalSeats:null==(m=E.data)?void 0:m.total,users:T.data,itemCount:null==(f=T.data)?void 0:f.length,canAddUser:!N,page:O,perPage:P,onPageChange:U,usernames:_.chips,onSearchUsername:_.add,onRemoveUsernameChip:_.remove,onRemoveUsernameChips:_.clear,onClearAllFilters:_.clear,getUrlForUser:e=>`#${e.name}`,onAddUser:()=>{g.push("/add-users")},isUserChecked:e=>x.includes(e),onCheckUser:(e,t)=>{C(t?[...x,e]:x.filter((t=>t!==e)))},onRemoveSeat:e=>{e&&C([e]),S(!0)}})]})]})},ye=({user:e,onSuccess:t,onError:n})=>{var r,a,s;const o=(0,h.useHistory)(),i=ee(),l=(0,j.a)({queryKey:["subscriptions"],queryFn:()=>i.get(e)}),{page:c,perPage:u,setPagination:m,setPaginationQuery:f}=(0,v.J)(),g=(0,d.useCallback)((()=>f(1,u)),[u,f]),x=(0,y.R)("username",g),C=(0,j.a)({queryKey:["assignedUsers",{page:c,perPage:u,usernames:x.chips}],queryFn:()=>i.seats(e)}),[w,S]=(0,d.useState)([]),O=((null==(r=l.data)?void 0:r.total)||0)-((null==(a=l.data)?void 0:a.available)||0),{mutate:P,isLoading:U}=(0,b.D)((()=>(S([]),i.unAssign(e,w))),{onSuccess:()=>{t("Successfully removed users")},onError:e=>{n("there was an error: "+e)}}),R=()=>o.push("/");return k.jsx(p.Modal,{isOpen:!0,title:`Remove ${O} users from their assigned seats`,variant:"medium",onClose:R,actions:[k.jsx(p.Button,{onClick:()=>P(),isDisabled:w.length>O,isLoading:U,children:"Remove"}),k.jsx(p.Button,{onClick:R,variant:p.ButtonVariant.link,isDisabled:U,children:"Cancel"})],children:k.jsx(se,{users:C.data,itemCount:null==(s=C.data)?void 0:s.length,page:c,perPage:u,onPageChange:m,usernames:x.chips,onSearchUsername:x.add,onRemoveUsernameChip:x.remove,onRemoveUsernameChips:x.clear,onClearAllFilters:x.clear,isUserChecked:e=>w.includes(e.id),onCheckUser:(e,t)=>{S(t?[...w,e.id]:w.filter((t=>t!==e.id)))}})})};var je=n(4082),be=function(){return be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},be.apply(this,arguments)},xe=function(){var e=(0,je.I0)(),t=function(t,n){void 0===n&&(n="success"),e((0,l.wN)({variant:n,title:t}))},n=function(e){return t(e,"danger")},r={orgId:"o1",serviceId:"smarts",token:(0,u.Z)().auth.getToken};return(0,o.jsx)(d.Suspense,be({fallback:(0,o.jsx)(p.Bullseye,{children:(0,o.jsx)(p.Spinner,{})})},{children:(0,o.jsx)(te,be({serviceName:"CIAM_Authz",baseUrl:"https://ciam-authz-hw-ciam-authz--runtime-ext.apps.ext.spoke.prod.us-east-1.aws.paas.redhat.com"},{children:(0,o.jsx)(h.BrowserRouter,be({basename:(0,m.eb)(window.location.pathname)+"/seats"},{children:(0,o.jsxs)(h.Switch,{children:[(0,o.jsxs)(h.Route,be({path:"/add-users"},{children:[(0,o.jsx)(ve,{user:r}),(0,o.jsx)(oe,{user:r,onSuccess:t,onError:n})]})),(0,o.jsxs)(h.Route,be({path:"/remove-users"},{children:[(0,o.jsx)(ve,{user:r}),(0,o.jsx)(ye,{user:r,onSuccess:t,onError:n})]})),(0,o.jsx)(h.Route,be({path:"/"},{children:(0,o.jsx)(ve,{user:r,onSuccess:t,onError:n})})),(0,o.jsx)(h.Route,{children:(0,o.jsx)(f.Z,{})})]})}))}))}))};const Ce=function(){var e=(0,u.Z)(),t=e.updateDocumentTitle,n=e.on,r=(0,h.useHistory)();return(0,d.useEffect)((function(){(0,c.JH)().register({notifications:l.ee}),t("Starter app");var e=n("APP_NAVIGATION",(function(e){console.dir(e),e.navId&&r.push(e.navId)}));return function(){e&&e()}}),[]),(0,o.jsxs)(d.Fragment,{children:[(0,o.jsx)(i.ZP,{}),(0,o.jsx)(xe,{})]})}},355:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(9961),a=n(1935),s=n.n(a),o=n(1236),i=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.JH)({},i([s(),(0,o.ZP)({errorDescriptionKey:["detail","stack"]})],e,!0))}}}]);
//# sourceMappingURL=../sourcemaps/813.d7b54e011847518122b298bca269b937.js.map