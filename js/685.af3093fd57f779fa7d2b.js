"use strict";(self.webpackChunkconsoledot=self.webpackChunkconsoledot||[]).push([[685],{9105:(e,n,t)=>{t.d(n,{Z:()=>Ie});var r=t(5893),a=t(7343),o=t(3215),i=t(925),s=t(5140),u=t(3264),c=t(670),l=t(8335),f=t(5240),h=t(6700),d=t(9704),p=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}u((r=r.apply(e,n||[])).next())}))},v=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},m=function(){function e(){}return e.prototype.get=function(){return p(this,void 0,Promise,(function(){var e,n,t;return v(this,(function(r){switch(r.label){case 0:return[4,fetch("/aw-api/subscriptions")];case 1:return[4,r.sent().json()];case 2:return e=r.sent(),n=e.totalSeats,t=e.availableSeats,[2,{total:n,available:t}]}}))}))},e.prototype.seats=function(){return p(this,void 0,Promise,(function(){return v(this,(function(e){switch(e.label){case 0:return[4,fetch("/aw-api/users")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},e.prototype.assign=function(){return Promise.resolve()},e.prototype.unAssign=function(){return Promise.resolve()},e}(),y=t(3396),g=t(9826),b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)},w=y.runtime({baseUrl:"/"});function x(e,n,t){return w.ok(w.fetchJson("/v1alpha/orgs/".concat(encodeURIComponent(e),"/licenses/").concat(encodeURIComponent(n)),b({},t)))}function j(e,n,t,r){return w.ok(w.fetchJson("/v1alpha/orgs/".concat(encodeURIComponent(e),"/licenses/").concat(encodeURIComponent(n)),w.json(b(b({},r),{method:"POST",body:t}))))}function C(e,n,t,r){var a=void 0===t?{}:t,o=a.includeUsers,i=a.filter;return w.ok(w.fetchJson("/v1alpha/orgs/".concat(encodeURIComponent(e),"/licenses/").concat(encodeURIComponent(n),"/seats").concat(g.query(g.explode({includeUsers:o,filter:i}))),b({},r)))}var P=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}u((r=r.apply(e,n||[])).next())}))},k=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},S=function(){function e(e){this.baseUrl=e||""}return e.prototype.get=function(e){var n=e.orgId,t=e.serviceId,r=e.token;return P(this,void 0,Promise,(function(){var e,a;return k(this,(function(o){switch(o.label){case 0:return[4,this.requestHeader(r)];case 1:return e=o.sent(),[4,x(n,t,e)];case 2:return a=o.sent(),[2,{available:Number(a.seatsAvailable)||0,total:Number(a.seatsTotal)||0}]}}))}))},e.prototype.seats=function(e,n){var t,r=e.orgId,a=e.serviceId,o=e.token;return void 0===n&&(n=!0),P(this,void 0,Promise,(function(){var e,i;return k(this,(function(s){switch(s.label){case 0:return[4,this.requestHeader(o)];case 1:return e=s.sent(),[4,C(r,a,{filter:n?"assigned":"assignable"},e)];case 2:return i=s.sent(),[2,(null===(t=i.users)||void 0===t?void 0:t.map((function(e){return{id:e.id||"",firstName:e.firstName||"",lastName:e.lastName||"",userName:e.username||"",assigned:!!e.assigned}})))||[]]}}))}))},e.prototype.requestHeader=function(e){return P(this,void 0,void 0,(function(){return k(this,(function(n){switch(n.label){case 0:return[4,z(e,this.baseUrl)];case 1:return[2,n.sent()]}}))}))},e.prototype.assign=function(e,n){return P(this,void 0,Promise,(function(){var t;return k(this,(function(r){switch(r.label){case 0:return t={assign:n},[4,this.modify(e,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.unAssign=function(e,n){return P(this,void 0,Promise,(function(){var t;return k(this,(function(r){switch(r.label){case 0:return t={unassign:n},[4,this.modify(e,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.modify=function(e,n){var t=e.orgId,r=e.serviceId,a=e.token;return P(this,void 0,Promise,(function(){var e;return k(this,(function(o){switch(o.label){case 0:return[4,this.requestHeader(a)];case 1:return e=o.sent(),[2,j(t,r,n,e)]}}))}))},e}(),O=function(){return O=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},O.apply(this,arguments)},U=y.runtime({baseUrl:"/api/entitlements/v1/"});function A(e,n){var t=void 0===e?{}:e,r=t.limit,a=t.offset;return U.ok(U.fetchJson("/seats".concat(g.query(g.explode({limit:r,offset:a}))),O({},n)))}function R(e,n){return U.ok(U.fetchJson("/seats",U.json(O(O({},n),{method:"POST",body:e}))))}function N(e,n){return U.ok(U.fetchJson("/seats/".concat(encodeURIComponent(e)),O(O({},n),{method:"DELETE"})))}var I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)},T=y.runtime({baseUrl:"/api/rbac/v1"});function E(e,n){var t=void 0===e?{}:e,r=t.limit,a=t.offset,o=t.matchCriteria,i=t.usernames,s=t.sortOrder,u=t.email,c=t.status,l=t.adminOnly,f=t.orderBy,h=t.usernameOnly;return T.ok(T.fetchJson("/principals/".concat(g.query(g.explode({limit:r,offset:a,match_criteria:o,usernames:i,sort_order:s,email:u,status:c,admin_only:l,order_by:f,username_only:h}))),I({},n)))}var q=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}u((r=r.apply(e,n||[])).next())}))},F=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},H=function(){function e(e){this.baseUrl=e||""}return e.prototype.requestHeader=function(e){return q(this,void 0,void 0,(function(){return F(this,(function(n){switch(n.label){case 0:return[4,z(e.token,this.baseUrl)];case 1:return[2,n.sent()]}}))}))},e.prototype.get=function(e){return q(this,void 0,Promise,(function(){var n,t,r,a,o;return F(this,(function(i){switch(i.label){case 0:return t=A,r=[{limit:10,offset:0}],[4,this.requestHeader(e)];case 1:return[4,t.apply(void 0,r.concat([i.sent()]))];case 2:return n=i.sent(),a=n.allowed||0,o=a-(n.consumed||0),[2,{available:a,total:o}]}}))}))},e.prototype.seats=function(e,n){return void 0===n&&(n=!0),q(this,void 0,Promise,(function(){var t,r;return F(this,(function(a){switch(a.label){case 0:return n?(t=A,r=[{}],[4,this.requestHeader(e)]):[3,3];case 1:return[4,t.apply(void 0,r.concat([a.sent()]))];case 2:return[2,a.sent().data.map((function(e){return{id:e.subscription_id||"",userName:e.account_username||"",firstName:"",lastName:"",assigned:!0}}))];case 3:return[4,this.requestHeader(e)];case 4:return[4,E({usernameOnly:!1},a.sent())];case 5:return[2,a.sent().data.map((function(e){var n=e.username;return{id:n,firstName:e.first_name||"",lastName:e.last_name||"",userName:n,assigned:!1}}))]}}))}))},e.prototype.assign=function(e,n){return q(this,void 0,Promise,(function(){var t=this;return F(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return q(t,void 0,void 0,(function(){var t,r;return F(this,(function(a){switch(a.label){case 0:return t=R,r=[{account_username:n}],[4,this.requestHeader(e)];case 1:return[2,t.apply(void 0,r.concat([a.sent()]))]}}))}))})))];case 1:return r.sent(),[2,Promise.resolve()]}}))}))},e.prototype.unAssign=function(e,n){return q(this,void 0,Promise,(function(){var t=this;return F(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return q(t,void 0,void 0,(function(){var t,r;return F(this,(function(a){switch(a.label){case 0:return t=N,r=[n],[4,this.requestHeader(e)];case 1:return[2,t.apply(void 0,r.concat([a.sent()]))]}}))}))})))];case 1:return r.sent(),[2,Promise.resolve()]}}))}))},e}(),z=function(e,n){return t=void 0,r=void 0,o=function(){var t;return function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(r){switch(r.label){case 0:return[4,e()];case 1:return t=r.sent(),[2,{headers:{Authorization:"Bearer ".concat(t)},baseUrl:n}]}}))},new((a=Promise)||(a=Promise))((function(e,n){function i(e){try{u(o.next(e))}catch(e){n(e)}}function s(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,s)}u((o=o.apply(t,r||[])).next())}));var t,r,a,o};function B(e,n){switch(e){case"CIAM_Authz":return new S(n);case"entitlements":return new H(n);case"mock":return new m;default:throw new Error("no implementation found for "+e)}}var L=function(){return L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},L.apply(this,arguments)},_=(0,u.createContext)(void 0),D=function(){return function(e){var n=(0,u.useContext)(e);if(null!=n)return n;throw new Error("No provider found for context, make sure it is included in your component hierarchy.")}(_)},J=function(e){var n=e.serviceName,t=e.baseUrl,a=e.children;return(0,r.jsx)(_.Provider,L({value:B(n,t)},{children:a}))},K=t(3028),M=t(827),G=t(950),V=t(5157),Q=t(9609),Z=t(3047),Y=function(){return Y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Y.apply(this,arguments)},W=function(){return(0,r.jsx)(l.Icon,Y({status:"danger",size:"xl"},{children:(0,r.jsx)(Z.$O,{})}))},$=function(){return(0,r.jsxs)(l.EmptyState,Y({isFullHeight:!0},{children:[(0,r.jsx)(l.EmptyStateIcon,{component:W,variant:"container"}),(0,r.jsx)(l.Title,Y({headingLevel:"h2",size:"lg"},{children:"Your organization no longer has an Seats Administration subscription."})),(0,r.jsx)(l.EmptyStateBody,{children:"Please contact Red Hat if there is an issue with your subscription or if you wish to continue."})]}))},X=function(){return X=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},X.apply(this,arguments)},ee=function(e){var n=e.usersToRemove,t=e.onOk;return(0,r.jsxs)(l.Modal,X({id:"remove-users-modal",variant:l.ModalVariant.small,isOpen:!0,"aria-label":"Remove users from seats",title:"Remove users from seats",titleIconVariant:"warning",showClose:!1,"aria-describedby":"modal-message",actions:[(0,r.jsx)(l.Button,X({onClick:t,variant:l.ButtonVariant.primary},{children:"Ok"}),1)]},{children:["Your organization has decreased the amount of seats available. Please remove ",n," users from their seats to continue the subscription."]}))},ne=function(){return ne=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ne.apply(this,arguments)},te=function(e){var n=e.availableSeats,t=e.totalSeats;return(0,r.jsx)(l.PageSection,ne({variant:"light",hasShadowBottom:!0},{children:(0,r.jsxs)(l.TextContent,{children:[(0,r.jsx)(l.Title,ne({headingLevel:"h1"},{children:"Seats Administration"})),(0,r.jsxs)(l.Level,{children:[(0,r.jsx)(l.LevelItem,{children:(0,r.jsx)(l.Text,{children:"This group contains all users assigned seats within your organization."})}),t>0&&(0,r.jsx)(l.LevelItem,{children:(0,r.jsxs)(l.Text,{children:["Seats available: ",(0,r.jsxs)(l.Label,ne({isCompact:!0},{children:[n," of ",t]}))]})})]})]})}))},re=t(4259),ae=t(4894),oe=t(7081),ie=function(){return ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ie.apply(this,arguments)},se=function(e){var n=e.totalSeats,t=e.onAddUsers;return(0,r.jsxs)(l.EmptyState,ie({isFullHeight:!0},{children:[(0,r.jsx)(l.EmptyStateIcon,{icon:oe.wl}),(0,r.jsxs)(l.Title,ie({headingLevel:"h2",size:"lg"},{children:["There are currently no users in your organization assigned seats.",(0,r.jsx)("br",{}),"Your organization has ",n," seats available."]})),(0,r.jsx)(l.EmptyStateBody,{children:"Please add users by using the button below."}),(0,r.jsx)(l.Button,ie({ouiaId:"button-create",variant:"primary",onClick:function(){return t()}},{children:"Add users"}))]}))},ue=t(810),ce=function(){return ce=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ce.apply(this,arguments)},le=function(e){var n=e.onClearAllFilters;return(0,r.jsxs)(l.EmptyState,ce({variant:l.EmptyStateVariant.xs},{children:[(0,r.jsx)(l.EmptyStateIcon,{icon:ue.W1}),(0,r.jsx)(l.Title,ce({headingLevel:"h2",size:"lg"},{children:"No results found"})),(0,r.jsxs)(l.EmptyStateBody,{children:["Adjust your filters and try again, or ",(0,r.jsx)("a",ce({onClick:n},{children:"clear all filters"})),"."]})]}))},fe=function(){return fe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},fe.apply(this,arguments)},he=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},de=["userName","firstName","lastName"],pe={userName:"Username",firstName:"First name",lastName:"Last name"},ve=function(e){var n,t=e.users,a=e.itemCount,o=e.page,i=e.perPage,s=e.usernames,u=e.totalSeats,f=e.getUrlForUser,h=e.isColumnSortable,d=e.canAddUser,p=e.isUserChecked,v=e.onCheckUser,m=e.onPageChange,y=e.onRemoveSeat,g=e.onAddUser,b=e.onSearchUsername,w=e.onRemoveUsernameChip,x=e.onRemoveUsernameChips,j=e.onClearAllFilters,C=s.length>0;return(0,r.jsx)("div",fe({id:"seatTable"},{children:(0,r.jsx)(ae.H,{data:t,columns:de,renderHeader:function(e){var n=e.column,t=e.Th,a=e.key;return(0,r.jsx)(t,{children:pe[n]},a)},renderCell:function(e){var n=e.column,t=e.row,a=e.Td,o=e.key;return(0,r.jsx)(a,fe({dataLabel:pe[n]},{children:"userName"===n?(0,r.jsx)(l.Button,{variant:"link",component:function(e){return(0,r.jsx)(c.Link,fe({to:f(t)},e,{children:t.userName}))},isInline:!0}):t[n]}),o)},renderActions:function(e){var n=e.row;return(0,r.jsx)(re.ActionsColumn,{rowData:me,items:[{title:"Remove seat",onClick:function(){return y(n)}}]})},isColumnSortable:h,toolbarBreakpoint:"lg",filters:(n={},n.Username={type:"search",chips:s,onSearch:b,onRemoveChip:w,onRemoveGroup:x,validate:function(e){return/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e)},errorMessage:"Invalid string"},n),actions:he(he([],d?[{label:"Assign user(s)",onClick:g,isPrimary:!0}]:[],!0),[{label:"Remove user(s)",onClick:function(){return y()},isPrimary:!1}],!1),itemCount:a,page:o,perPage:i,onPageChange:m,onClearAllFilters:j,ariaLabel:"Seats Administration users",isFiltered:C,isRowChecked:function(e){var n=e.row;return p(n)},onCheck:function(e,n){var t=e.row;return v(t,n)},emptyStateNoData:(0,r.jsx)(se,{totalSeats:u||0,onAddUsers:g}),emptyStateNoResults:(0,r.jsx)(le,{onClearAllFilters:j})})}))},me={actionProps:{style:{zIndex:9999}}},ye=function(){return ye=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ye.apply(this,arguments)},ge=function(e){var n=e.users,t=e.onConfirm,a=e.onCancel,o=(0,u.useState)(n.slice(0,5)),i=o[0],s=o[1],c=(0,u.useState)(5),f=c[0],h=c[1],d=(0,u.useState)(1),p=d[0],v=d[1];return(0,r.jsxs)(l.Modal,ye({title:"Remove users",titleIconVariant:"warning",isOpen:!0,variant:"small",actions:[(0,r.jsx)(l.Button,ye({variant:"danger",onClick:function(){return t()}},{children:"Remove user(s)"}),"remove"),(0,r.jsx)(l.Button,ye({variant:"link",onClick:function(){return a()}},{children:"Cancel"}),"cancel")],onClose:a},{children:["Are you sure you want to remove the user(s) below from Project Wisdom",n.length>5?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(re.TableComposable,ye({variant:"compact"},{children:[(0,r.jsx)(re.Thead,{children:(0,r.jsx)(re.Tr,{children:(0,r.jsx)(re.Th,{children:"Name"})})}),(0,r.jsx)(re.Tbody,{children:i.map((function(e){return(0,r.jsx)(re.Tr,{children:(0,r.jsxs)(re.Td,ye({dataLabel:"Name"},{children:[e.firstName," ",e.lastName]}))},e.id)}))})]})),(0,r.jsx)(l.Pagination,{isCompact:!0,perPageComponent:"button",itemCount:n.length,perPage:f,page:p,variant:l.PaginationVariant.bottom,perPageOptions:[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20}],onPerPageSelect:function(e,t){h(t),s(n.slice((p-1)*t,p*t))},onSetPage:function(e,t){v(t),s(n.slice((t-1)*f,t*f))}})]}):(0,r.jsx)("p",ye({className:"pf-u-pt-md"},{children:n.map((function(e,t){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("b",{children:[e.firstName," ",e.lastName]}),t!==n.length-1?", ":""]})}))}))]}))},be=function(){return be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},be.apply(this,arguments)},we=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},xe=function(e){var n,t,a,o,i,s,f,h,d,p,v=e.user,m=e.onSuccess,y=e.onError,g=(0,c.useHistory)(),b=(0,u.useState)([]),w=b[0],x=b[1],j=(0,u.useState)(!1),C=j[0],P=j[1],k=(0,K.J)(),S=k.page,O=k.perPage,U=k.setPagination,A=k.setPaginationQuery,R=(0,u.useCallback)((function(){return A(1,O)}),[O,A]),N=(0,M.R)("username",R),I=D(),T=(0,G.NL)(),E=(0,V.a)({queryKey:["subscriptions"],queryFn:function(){return I.get(v)}}),q=(0,V.a)({queryKey:["users",{page:S,perPage:O,usernames:N.chips}],queryFn:function(){return I.seats(v)}}),F=((null===(n=E.data)||void 0===n?void 0:n.available)||0)<0,H=Math.abs((null===(t=E.data)||void 0===t?void 0:t.available)||0),z=((null===(a=E.data)||void 0===a?void 0:a.total)||0)>0&&0===(null===(o=E.data)||void 0===o?void 0:o.available),B=(0,Q.D)((function(e){return n=void 0,t=void 0,a=function(){return function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(n){switch(n.label){case 0:return[4,I.unAssign(v,e.map((function(e){return e.id})))];case 1:return n.sent(),P(!1),x([]),[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function s(e){try{u(a.throw(e))}catch(e){o(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((a=a.apply(n,t||[])).next())}));var n,t,r,a}),{onSuccess:function(){m&&m("Successfully removed users"),T.invalidateQueries({queryKey:["users"]})},onError:function(e){y&&y("there was an error: "+e)}}).mutate;return(0,r.jsxs)(l.Page,{children:[(0,r.jsx)(te,{totalSeats:(null===(i=E.data)||void 0===i?void 0:i.total)||0,availableSeats:(null===(s=E.data)||void 0===s?void 0:s.available)||0}),0===(null===(f=E.data)||void 0===f?void 0:f.total)&&(0,r.jsx)($,{}),F&&H&&(0,r.jsx)(ee,{usersToRemove:H,onOk:function(){return g.push("/remove-users")}}),C&&(0,r.jsx)(ge,{users:w,onConfirm:function(){return B(w)},onCancel:function(){return P(!1)}}),(0,r.jsxs)(l.PageSection,be({isFilled:!0},{children:[z?(0,r.jsx)(l.Alert,{title:"There are 0 seats left in your organization's subscription. Contact Red Hat to manage your Seats Administration license.",variant:"warning",isInline:!0}):null,0!==(null===(h=E.data)||void 0===h?void 0:h.total)&&(0,r.jsx)(ve,{totalSeats:null===(d=E.data)||void 0===d?void 0:d.total,users:q.data,itemCount:null===(p=q.data)||void 0===p?void 0:p.length,canAddUser:!z,page:S,perPage:O,onPageChange:U,usernames:N.chips,onSearchUsername:N.add,onRemoveUsernameChip:N.remove,onRemoveUsernameChips:N.clear,onClearAllFilters:N.clear,getUrlForUser:function(e){return"#".concat(e.id)},onAddUser:function(){g.push("/add-users")},isUserChecked:function(e){return w.includes(e)},onCheckUser:function(e,n){x(n?we(we([],w,!0),[e],!1):w.filter((function(n){return n!==e})))},onRemoveSeat:function(e){e&&x([e]),P(!0)}})]}))]})},je=function(){return je=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},je.apply(this,arguments)},Ce=function(e){var n,t=e.users,a=e.itemCount,o=e.page,i=e.perPage,s=e.usernames,u=e.isColumnSortable,c=e.isUserChecked,l=e.onPageChange,f=e.onSearchUsername,h=e.onRemoveUsernameChip,d=e.onRemoveUsernameChips,p=e.onClearAllFilters,v=e.onCheckUser,m=s.length>0,y=(o-1)*(i||20);return(0,r.jsx)(ae.H,{data:null==t?void 0:t.slice(y,y+(i||20)),columns:de,renderHeader:function(e){var n=e.column,t=e.Th,a=e.key;return(0,r.jsx)(t,{children:pe[n]},a)},renderCell:function(e){var n=e.column,t=e.row,a=e.Td,o=e.key;return(0,r.jsx)(a,je({dataLabel:pe[n]},{children:t[n]}),o)},isColumnSortable:u,isRowChecked:function(e){var n=e.row;return c(n)},onCheck:function(e,n){var t=e.row;return v(t,n)},toolbarBreakpoint:"lg",filters:(n={},n.Username={type:"search",chips:s,onSearch:f,onRemoveChip:h,onRemoveGroup:d,validate:function(e){return/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e)},errorMessage:"Invalid string"},n),itemCount:a,page:o,perPage:i,onPageChange:l,onClearAllFilters:p,ariaLabel:"Seats Administration users",isFiltered:m,emptyStateNoData:(0,r.jsx)(r.Fragment,{}),emptyStateNoResults:(0,r.jsx)(le,{onClearAllFilters:p})})},Pe=function(){return Pe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Pe.apply(this,arguments)},ke=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},Se=function(e){var n,t,a,o,i,s=e.user,f=e.onSuccess,h=e.onError,d=(0,c.useHistory)(),p=D(),v=function(){return d.push("/")},m=(0,V.a)({queryKey:["subscriptions"],queryFn:function(){return p.get(s)}}),y=(0,K.J)(),g=y.page,b=y.perPage,w=y.setPagination,x=y.setPaginationQuery,j=(0,u.useCallback)((function(){return x(1,b)}),[b,x]),C=(0,M.R)("name",j),P=(0,G.NL)(),k=(0,V.a)({queryKey:["availableUsers",{page:g,perPage:b,usernames:C.chips}],queryFn:function(){return p.seats(s,!1)}}),S=(0,Q.D)((function(){return p.assign(s,R)}),{onSuccess:function(){v(),f("Successfully assigned users"),P.invalidateQueries({queryKey:["users","availableUsers"]})},onError:function(e){h("there was an error: "+e)}}),O=S.mutate,U=S.isLoading,A=(0,u.useState)([]),R=A[0],N=A[1],I=((null===(n=m.data)||void 0===n?void 0:n.total)||0)-((null===(t=m.data)||void 0===t?void 0:t.available)||0),T=void 0===(null===(a=m.data)||void 0===a?void 0:a.total)||!(R.length>0)||R.length+I>m.data.total;return(0,r.jsxs)(l.Modal,Pe({isOpen:!0,title:"Assign users",variant:"medium",onClose:v,actions:[(0,r.jsx)(l.Button,Pe({onClick:function(){return O()},isDisabled:T,isLoading:U},{children:"Assign"}),"assign"),(0,r.jsx)(l.Button,Pe({onClick:v,variant:l.ButtonVariant.link},{children:"Cancel"}),"cancel")]},{children:[R.length+I>((null===(o=m.data)||void 0===o?void 0:o.total)||0)&&(0,r.jsx)(l.Alert,{variant:"warning",isInline:!0,title:"Your organization does not have enough Project Wisdom seats for the assignments below"}),(0,r.jsx)(Ce,{users:k.data,itemCount:null===(i=k.data)||void 0===i?void 0:i.length,page:g,perPage:b,onPageChange:w,usernames:C.chips,onSearchUsername:C.add,onRemoveUsernameChip:C.remove,onRemoveUsernameChips:C.clear,onClearAllFilters:C.clear,isUserChecked:function(e){return R.includes(e.id)},onCheckUser:function(e,n){N(n?ke(ke([],R,!0),[e.id],!1):R.filter((function(n){return n!==e.id})))}})]}))},Oe=function(){return Oe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Oe.apply(this,arguments)},Ue=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},Ae=function(e){var n,t,a,o=e.user,i=e.onSuccess,s=e.onError,f=(0,c.useHistory)(),h=D(),d=(0,V.a)({queryKey:["subscriptions"],queryFn:function(){return h.get(o)}}),p=(0,K.J)(),v=p.page,m=p.perPage,y=p.setPagination,g=p.setPaginationQuery,b=(0,u.useCallback)((function(){return g(1,m)}),[m,g]),w=(0,M.R)("username",b),x=(0,G.NL)(),j=(0,V.a)({queryKey:["assignedUsers",{page:v,perPage:m,usernames:w.chips}],queryFn:function(){return h.seats(o)}}),C=(0,u.useState)([]),P=C[0],k=C[1],S=((null===(n=d.data)||void 0===n?void 0:n.total)||0)-((null===(t=d.data)||void 0===t?void 0:t.available)||0),O=(0,Q.D)((function(){return k([]),h.unAssign(o,P)}),{onSuccess:function(){i("Successfully removed users"),x.invalidateQueries({queryKey:["users","assignedUsers"]})},onError:function(e){s("there was an error: "+e)}}),U=O.mutate,A=O.isLoading,R=function(){return f.push("/")};return(0,r.jsx)(l.Modal,Oe({isOpen:!0,title:"Remove ".concat(S," users from their assigned seats"),variant:"medium",onClose:R,actions:[(0,r.jsx)(l.Button,Oe({onClick:function(){return U()},isDisabled:P.length>S,isLoading:A},{children:"Remove"}),"remove"),(0,r.jsx)(l.Button,Oe({onClick:R,variant:l.ButtonVariant.link,isDisabled:A},{children:"Cancel"}),"cancel")]},{children:(0,r.jsx)(Ce,{users:j.data,itemCount:null===(a=j.data)||void 0===a?void 0:a.length,page:v,perPage:m,onPageChange:y,usernames:w.chips,onSearchUsername:w.add,onRemoveUsernameChip:w.remove,onRemoveUsernameChips:w.clear,onClearAllFilters:w.clear,isUserChecked:function(e){return P.includes(e.id)},onCheckUser:function(e,n){k(n?Ue(Ue([],P,!0),[e.id],!1):P.filter((function(n){return n!==e.id})))}})}))},Re=function(){return Re=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Re.apply(this,arguments)},Ne=function(){var e=(0,u.useState)(),n=e[0],t=e[1],a=(0,d.I0)(),i=function(e,n){void 0===n&&(n="success"),a((0,o.wN)({variant:n,title:e}))},p=function(e){return i(e,"danger")},v=(0,s.Z)().auth,m=v.getToken,y=v.getUser;return(0,u.useEffect)((function(){var e,n,r,a;e=void 0,n=void 0,a=function(){var e;return function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(n){switch(n.label){case 0:return[4,y()];case 1:return(e=n.sent())&&t({orgId:e.identity.org_id,serviceId:"smarts",token:m}),[2]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function s(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,s)}u((a=a.apply(e,n||[])).next())}))}),[]),n?(0,r.jsx)(u.Suspense,Re({fallback:(0,r.jsx)(l.Bullseye,{children:(0,r.jsx)(l.Spinner,{})})},{children:(0,r.jsx)(J,Re({serviceName:"CIAM_Authz",baseUrl:"https://ciam-authz-hw-ciam-authz--runtime-ext.apps.ext.spoke.preprod.us-east-1.aws.paas.redhat.com"},{children:(0,r.jsx)(c.BrowserRouter,Re({basename:(0,f.eb)(window.location.pathname)+"/seats"},{children:(0,r.jsxs)(c.Switch,{children:[(0,r.jsxs)(c.Route,Re({path:"/add-users"},{children:[(0,r.jsx)(xe,{user:n}),(0,r.jsx)(Se,{user:n,onSuccess:i,onError:p})]})),(0,r.jsxs)(c.Route,Re({path:"/remove-users"},{children:[(0,r.jsx)(xe,{user:n}),(0,r.jsx)(Ae,{user:n,onSuccess:i,onError:p})]})),(0,r.jsx)(c.Route,Re({path:"/"},{children:(0,r.jsx)(xe,{user:n,onSuccess:i,onError:p})})),(0,r.jsx)(c.Route,{children:(0,r.jsx)(h.Z,{})})]})}))}))})):(0,r.jsx)(l.Bullseye,{children:(0,r.jsx)(l.Spinner,{})})};const Ie=function(){var e=(0,s.Z)(),n=e.updateDocumentTitle,t=e.on,l=(0,c.useHistory)();return(0,u.useEffect)((function(){(0,i.JH)().register({notifications:o.ee}),n("Starter app");var e=t("APP_NAVIGATION",(function(e){console.dir(e),e.navId&&l.push(e.navId)}));return function(){e&&e()}}),[]),(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)(a.ZP,{}),(0,r.jsx)(Ne,{})]})}},8161:(e,n,t)=>{t.d(n,{S:()=>u});var r=t(925),a=t(8573),o=t.n(a),i=t(4885),s=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};function u(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,r.JH)({},s([o(),(0,i.ZP)({errorDescriptionKey:["detail","stack"]})],e,!0))}}}]);
//# sourceMappingURL=../sourcemaps/685.0d91b5af81d6635e8dc74897f84bab7e.js.map