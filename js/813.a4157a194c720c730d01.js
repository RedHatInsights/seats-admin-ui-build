/*! For license information please see 813.a4157a194c720c730d01.js.LICENSE.txt */
"use strict";(self.webpackChunkconsoledot=self.webpackChunkconsoledot||[]).push([[813],{5044:(e,t,n)=>{n.d(t,{Z:()=>Oe});var r,a,s,o=n(2322),i=n(4119),l=n(1832),c=n(9961),u=n(2586),d=n(2820),h=n(5194),m=n(8371),p=n(6460),f=n(694),g=n(3026),v=n(8460),y=n(6598),b=n(7784),j=n(330),C=n(2429),x=n(409),w=n(8063),S=n(2468),O=n(112),P=Object.defineProperty,U=(e,t,n)=>(((e,t,n)=>{t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),k={},R={};({get exports(){return k},set exports(e){k=e}}).exports=function(){if(s)return R;s=1,function(){if(a)return r;a=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}()?Object.assign:function(r,a){for(var s,o,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(r),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))t.call(s,c)&&(i[c]=s[c]);if(e){o=e(s);for(var u=0;u<o.length;u++)n.call(s,o[u])&&(i[o[u]]=s[o[u]])}}return i}}();var e=d,t=60103;if(R.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;t=n("react.element"),R.Fragment=n("react.fragment")}var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,r){var a,s={},c=null,u=null;for(a in void 0!==r&&(c=""+r),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)i.call(n,a)&&!l.hasOwnProperty(a)&&(s[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===s[a]&&(s[a]=n[a]);return{$$typeof:t,type:e,key:c,ref:u,props:s,_owner:o.current}}return R.jsx=c,R.jsxs=c,R}();class _{async get(e){const{totalSeats:t,availableSeats:n}=await(await fetch("/aw-api/subscriptions")).json();return{total:t,available:n}}async seats({orgId:e,serviceId:t},n){return(await(await fetch("/aw-api/users")).json()).users.map((({username:e,firstName:t,lastName:n})=>({id:e,name:`${t} ${n}`})))}assign(e,t){return Promise.resolve()}unAssign(e,t){return Promise.resolve()}}var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E={},I={},T={};!function(e){function t(e,t=","){return(n,...r)=>n.reduce(((n,a,s)=>`${n}${a}${((n,r)=>{const a=e[r%e.length];return typeof n>"u"?"":"object"==typeof n?Array.isArray(n)?n.map(a).join(t):Object.entries(n).reduce(((e,t)=>[...e,...t]),[]).map(a).join(t):a(String(n))})(r[s],s)}`),"")}Object.defineProperty(e,"__esModule",{value:!0}),e.joinUrl=e.stripUndefined=e.delimited=e.encode=e.allowReserved=e.encodeReserved=void 0,e.encodeReserved=[encodeURIComponent,encodeURIComponent],e.allowReserved=[encodeURIComponent,encodeURI],e.encode=t,e.delimited=function(n=","){return(r,a=e.encodeReserved)=>Object.entries(r).filter((([,e])=>void 0!==e)).map((([e,r])=>t(a,n)`${e}=${r}`)).join("&")},e.stripUndefined=function(e){return e&&JSON.parse(JSON.stringify(e))},e.joinUrl=function(...e){return e.filter(Boolean).map(((e,t)=>0===t?e:e.replace(/^\/+/,""))).map(((e,t,n)=>t===n.length-1?e:e.replace(/\/+$/,""))).join("/")}}(T),Object.defineProperty(I,"__esModule",{value:!0}),I.space=I.pipe=I.form=I.json=N=I.explode=I.deep=F=I.query=void 0;const $=T;var F=I.query=function(...e){const t=e.filter(Boolean).join("&");return t&&`?${t}`};I.deep=function(e,[t,n]=$.encodeReserved){const r=(0,$.encode)([e=>e,t]),a=(0,$.encode)([e=>e,n]),s=(e,t="")=>Object.entries(e).filter((([,e])=>void 0!==e)).map((([n,o])=>{const i=Array.isArray(e)?"":n,l=t?r`${t}[${i}]`:n;return"object"==typeof o?s(o,l):a`${l}=${o}`})).join("&");return s(e)};var N=I.explode=function e(t,n=$.encodeReserved){const r=(0,$.encode)(n);return Object.entries(t).filter((([,e])=>void 0!==e)).map((([t,a])=>Array.isArray(a)?a.map((e=>r`${t}=${e}`)).join("&"):"object"==typeof a?e(a,n):r`${t}=${a}`)).join("&")};I.json=function(e,t=$.encodeReserved){const n=(0,$.encode)(t);return Object.entries(e).filter((([,e])=>void 0!==e)).map((([e,t])=>{const r=JSON.stringify(t);return n`${e}=${r}`})).join("&")},I.form=(0,$.delimited)(),I.pipe=(0,$.delimited)("|"),I.space=(0,$.delimited)("%20");var q={};!function(e){var t=A&&A.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,i)}l((r=r.apply(e,t||[])).next())}))};function n(n){return t(this,void 0,void 0,(function*(){const t=yield n;if(e.SUCCESS_CODES.some((e=>e==t.status)))return t.data;throw new a(t.status,t.data,t.headers)}))}function r(e){return(...t)=>n(e(...t))}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpError=e.optimistic=e.okify=e.ok=e.SUCCESS_CODES=e.handle=void 0,e.handle=function(e,n){return t(this,void 0,void 0,(function*(){const{status:t,data:r,headers:s}=yield e,o=n[t];if(o)return o(r);if(n.default)return n.default(t,r);throw new a(t,r,s)}))},e.SUCCESS_CODES=[200,201,202,204],e.ok=n,e.okify=r,e.optimistic=function(e){const t={};return Object.entries(e).forEach((([e,n])=>{t[e]="function"==typeof n?r(n):n})),t};class a extends Error{constructor(e,t,n){super(`Error: ${e}`),this.status=e,this.data=t,this.headers=n}}e.HttpError=a}(q);var B=A&&A.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),H=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),L=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&B(t,e,n);return H(t,e),t},D=A&&A.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,i)}l((r=r.apply(e,t||[])).next())}))},z=A&&A.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(E,"__esModule",{value:!0});var J=E.runtime=void 0;const M=L(I),K=T,V=q,Q=(J=E.runtime=function(e){function t(e,t){return D(this,void 0,void 0,(function*(){const r=yield n(e,t);let a;try{a=yield r.text()}catch{}return{status:r.status,headers:r.headers,contentType:r.headers.get("content-type"),data:a}}))}function n(t,n={}){return D(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},e),n),{baseUrl:a,headers:s,fetch:o}=r,i=z(r,["baseUrl","headers","fetch"]),l=(0,K.joinUrl)(a,t);return yield(o||fetch)(l,Object.assign(Object.assign({},i),{headers:(0,K.stripUndefined)(Object.assign(Object.assign({},e.headers),s))}))}))}return{ok:V.ok,fetchText:t,fetchJson:function(e,n={}){return D(this,void 0,void 0,(function*(){const{status:r,headers:a,contentType:s,data:o}=yield t(e,Object.assign(Object.assign({},n),{headers:Object.assign({Accept:"application/json"},n.headers)}));return s&&s.includes("json")?{status:r,headers:a,data:o?JSON.parse(o):null}:{status:r,headers:a,data:o}}))},fetchBlob:function(e,t={}){return D(this,void 0,void 0,(function*(){const r=yield n(e,t);let a;try{a=yield r.blob()}catch{}return{status:r.status,headers:r.headers,data:a}}))},json(e){var{body:t,headers:n}=e,r=z(e,["body","headers"]);return Object.assign(Object.assign(Object.assign({},r),null!=t&&{body:JSON.stringify(t)}),{headers:Object.assign(Object.assign({},n),{"Content-Type":"application/json"})})},form(e){var{body:t,headers:n}=e,r=z(e,["body","headers"]);return Object.assign(Object.assign(Object.assign({},r),null!=t&&{body:M.form(t)}),{headers:Object.assign(Object.assign({},n),{"Content-Type":"application/x-www-form-urlencoded"})})},multipart(t){var{body:n}=t,r=z(t,["body"]);if(null==n)return r;const a=new(e.formDataConstructor||r.formDataConstructor||FormData);return Object.entries(n).forEach((([e,t])=>{a.append(e,t)})),Object.assign(Object.assign({},r),{body:a})}}})({baseUrl:"https://ciam-authz-hw-ciam-authz--runtime-ext.apps.ext.spoke.preprod.us-east-1.aws.paas.redhat.com/"});class Z{constructor(e){U(this,"baseUrl"),this.baseUrl=e||""}async get({orgId:e,serviceId:t,token:n}){const r=await this.requestHeader(n),a=await function(e,t,n){return Q.ok(Q.fetchJson(`/v1alpha/orgs/${encodeURIComponent(e)}/licenses/${encodeURIComponent(t)}`,{...n}))}(e,t,r);return{available:a.seatsAvailable||0,total:a.seatsTotal||0}}async seats({orgId:e,serviceId:t,token:n},r=!0){var a;const s=await this.requestHeader(n);return(null==(a=(await function(e,t,{includeUsers:n,filter:r}={},a){return Q.ok(Q.fetchJson(`/v1alpha/orgs/${encodeURIComponent(e)}/licenses/${encodeURIComponent(t)}/seats${F(N({includeUsers:n,filter:r}))}`,{...a}))}(e,t,{filter:r?"assigned":"assignable"},s)).users)?void 0:a.map((({id:e,displayName:t,assigned:n})=>({id:e||"",name:t||"",assigned:!!n}))))||[]}async requestHeader(e){return await ee(e,this.baseUrl)}async assign(e,t){const n={assign:t};await this.modify(e,n)}async unAssign(e,t){const n={unassign:t};await this.modify(e,n)}async modify({orgId:e,serviceId:t,token:n},r){return function(e,t,n,r){return Q.ok(Q.fetchJson(`/v1alpha/orgs/${encodeURIComponent(e)}/licenses/${encodeURIComponent(t)}`,Q.json({...r,method:"POST",body:n})))}(e,t,r,await this.requestHeader(n))}}const Y=J({baseUrl:"/api/entitlements/v1/"});function W({limit:e,offset:t}={},n){return Y.ok(Y.fetchJson(`/seats${F(N({limit:e,offset:t}))}`,{...n}))}const G=J({baseUrl:"/api/rbac/v1"});class X{constructor(e){U(this,"baseUrl"),this.baseUrl=e||""}async requestHeader(e){return await ee(e.token,this.baseUrl)}async get(e){const t=await W({limit:10,offset:0},await this.requestHeader(e)),n=t.allowed||0;return{available:n,total:n-(t.consumed||0)}}async seats(e,t=!0){if(t)return(await W({},await this.requestHeader(e))).data.map((({subscription_id:e,account_username:t})=>({id:e||"",name:t||"",assigned:!0})));{const t=await this.requestHeader(e);return(await function({limit:e,offset:t,matchCriteria:n,usernames:r,sortOrder:a,email:s,status:o,adminOnly:i,orderBy:l,usernameOnly:c}={},u){return G.ok(G.fetchJson(`/principals/${F(N({limit:e,offset:t,match_criteria:n,usernames:r,sort_order:a,email:s,status:o,admin_only:i,order_by:l,username_only:c}))}`,{...u}))}({usernameOnly:!1},t)).data.map((({username:e,first_name:t,last_name:n})=>({id:e,name:`${t} ${n}`,assigned:!1})))}}async assign(e,t){return await Promise.all(t.map((async t=>function(e,t){return Y.ok(Y.fetchJson("/seats",Y.json({...t,method:"POST",body:e})))}({account_username:t},await this.requestHeader(e))))),Promise.resolve()}async unAssign(e,t){return await Promise.all(t.map((async t=>function(e,t){return Y.ok(Y.fetchJson(`/seats/${encodeURIComponent(e)}`,{...t,method:"DELETE"}))}(t,await this.requestHeader(e))))),Promise.resolve()}}const ee=async(e,t)=>({headers:{Authorization:`Bearer ${await e()}`},baseUrl:t});function te(e,t){switch(e){case"CIAM_Authz":return new Z(t);case"entitlements":return new X(t);case"mock":return new _;default:throw new Error("no implementation found for "+e)}}const ne=(0,d.createContext)(void 0),re=()=>function(e){const t=(0,d.useContext)(e);if(null!=t)return t;throw new Error("No provider found for context, make sure it is included in your component hierarchy.")}(ne),ae=({serviceName:e,baseUrl:t,children:n})=>k.jsx(ne.Provider,{value:te(e,t),children:n}),se=({onClearAllFilters:e})=>k.jsxs(m.EmptyState,{variant:m.EmptyStateVariant.xs,children:[k.jsx(m.EmptyStateIcon,{icon:x.W1}),k.jsx(m.Title,{headingLevel:"h2",size:"lg",children:"No results found"}),k.jsxs(m.EmptyStateBody,{children:["Adjust your filters and try again, or ",k.jsx("a",{onClick:e,children:"clear all filters"}),"."]})]}),oe=["name"],ie={name:"Display name"},le=({users:e,itemCount:t,page:n,perPage:r,usernames:a,isColumnSortable:s,isUserChecked:o,onPageChange:i,onSearchUsername:l,onRemoveUsernameChip:c,onRemoveUsernameChips:u,onClearAllFilters:d,onCheckUser:h})=>{const m=a.length>0;return k.jsx(g.H,{data:e,columns:oe,renderHeader:({column:e,Th:t,key:n})=>k.jsx(t,{children:ie[e]},n),renderCell:({column:e,row:t,Td:n,key:r})=>k.jsx(n,{dataLabel:ie[e],children:t[e]},r),isColumnSortable:s,isRowChecked:({row:e})=>o(e),onCheck:({row:e},t)=>h(e,t),toolbarBreakpoint:"lg",filters:{Username:{type:"search",chips:a,onSearch:l,onRemoveChip:c,onRemoveGroup:u,validate:e=>/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e),errorMessage:"Invalid string"}},itemCount:t,page:n,perPage:r,onPageChange:i,onClearAllFilters:d,ariaLabel:"Seats Administration users",isFiltered:m,emptyStateNoData:k.jsx(k.Fragment,{}),emptyStateNoResults:k.jsx(se,{onClearAllFilters:d})})},ce=({user:e,onSuccess:t,onError:n})=>{var r,a,s,o,i;const l=(0,h.useHistory)(),c=re(),u=()=>l.push("/"),p=(0,b.a)({queryKey:["subscriptions"],queryFn:()=>c.get(e)}),{page:f,perPage:g,setPagination:x,setPaginationQuery:w}=(0,v.J)(),S=(0,d.useCallback)((()=>w(1,g)),[g,w]),O=(0,y.R)("name",S),P=(0,j.NL)(),U=(0,b.a)({queryKey:["availableUsers",{page:f,perPage:g,usernames:O.chips}],queryFn:()=>c.seats(e,!1)}),{mutate:R,isLoading:_}=(0,C.D)((()=>c.assign(e,A)),{onSuccess:()=>{u(),t("Successfully assigned users"),P.invalidateQueries({queryKey:["users","availableUsers"]})},onError:e=>{n("there was an error: "+e)}}),[A,E]=(0,d.useState)([]),I=((null==(r=p.data)?void 0:r.total)||0)-((null==(a=p.data)?void 0:a.available)||0),T=void 0===(null==(s=p.data)?void 0:s.total)||!(A.length>0)||A.length+I>p.data.total;return k.jsxs(m.Modal,{isOpen:!0,title:"Assign users",variant:"medium",onClose:u,actions:[k.jsx(m.Button,{onClick:()=>R(),isDisabled:T,isLoading:_,children:"Assign"},"assign"),k.jsx(m.Button,{onClick:u,variant:m.ButtonVariant.link,children:"Cancel"},"cancel")],children:[A.length+I>((null==(o=p.data)?void 0:o.total)||0)&&k.jsx(m.Alert,{variant:"warning",isInline:!0,title:"Your organization does not have enough Project Wisdom seats for the assignments below"}),k.jsx(le,{users:U.data,itemCount:null==(i=U.data)?void 0:i.length,page:f,perPage:g,onPageChange:x,usernames:O.chips,onSearchUsername:O.add,onRemoveUsernameChip:O.remove,onRemoveUsernameChips:O.clear,onClearAllFilters:O.clear,isUserChecked:e=>A.includes(e.id),onCheckUser:(e,t)=>{E(t?[...A,e.id]:A.filter((t=>t!==e.id)))}})]})},ue=()=>k.jsx(m.Icon,{status:"danger",size:"xl",children:k.jsx(w.$O,{})}),de=()=>k.jsxs(m.EmptyState,{isFullHeight:!0,children:[k.jsx(m.EmptyStateIcon,{component:ue,variant:"container"}),k.jsx(m.Title,{headingLevel:"h2",size:"lg",children:"Your organization no longer has an Seats Administration subscription."}),k.jsx(m.EmptyStateBody,{children:"Please contact Red Hat if there is an issue with your subscription or if you wish to continue."})]}),he=({usersToRemove:e,onOk:t})=>k.jsxs(m.Modal,{id:"remove-users-modal",variant:m.ModalVariant.small,isOpen:!0,"aria-label":"Remove users from seats",title:"Remove users from seats",titleIconVariant:"warning",showClose:!1,"aria-describedby":"modal-message",actions:[k.jsx(m.Button,{onClick:t,variant:m.ButtonVariant.primary,children:"Ok"},1)],children:["Your organization has decreased the amount of seats available. Please remove ",e," users from their seats to continue the subscription."]}),me=({availableSeats:e,totalSeats:t})=>k.jsx(m.PageSection,{variant:"light",hasShadowBottom:!0,children:k.jsxs(m.TextContent,{children:[k.jsx(m.Title,{headingLevel:"h1",children:"Seats Administration"}),k.jsxs(m.Level,{children:[k.jsx(m.LevelItem,{children:k.jsx(m.Text,{children:"This group contains all users assigned seats within your organization."})}),t>0&&k.jsx(m.LevelItem,{children:k.jsxs(m.Text,{children:["Seats available: ",k.jsxs(m.Label,{isCompact:!0,children:[e," of ",t]})]})})]})]})}),pe=({totalSeats:e,onAddUsers:t})=>k.jsxs(m.EmptyState,{isFullHeight:!0,children:[k.jsx(m.EmptyStateIcon,{icon:S.wl}),k.jsxs(m.Title,{headingLevel:"h2",size:"lg",children:["There are currently no users in your organization assigned seats.",k.jsx("br",{}),"Your organization has ",e," seats available."]}),k.jsx(m.EmptyStateBody,{children:"Please add users by using the button below."}),k.jsx(m.Button,{ouiaId:"button-create",variant:"primary",onClick:()=>t(),children:"Add users"})]}),fe=["name"],ge={name:"Username"},ve=({users:e,itemCount:t,page:n,perPage:r,usernames:a,totalSeats:s,getUrlForUser:o,isColumnSortable:i,canAddUser:l,isUserChecked:c,onCheckUser:u,onPageChange:d,onRemoveSeat:p,onAddUser:f,onSearchUsername:v,onRemoveUsernameChip:y,onRemoveUsernameChips:b,onClearAllFilters:j})=>{const C=a.length>0;return k.jsx(g.H,{data:e,columns:fe,renderHeader:({column:e,Th:t,key:n})=>k.jsx(t,{children:ge[e]},n),renderCell:({column:e,row:t,Td:n,key:r})=>k.jsx(n,{dataLabel:ge[e],children:"name"===e?k.jsx(m.Button,{variant:"link",component:e=>k.jsx(h.Link,{to:o(t),...e,children:t.name}),isInline:!0}):t[e]},r),renderActions:({row:e})=>k.jsx(O.ActionsColumn,{rowData:ye,items:[{title:"Remove seat",onClick:()=>p(e)}]}),isColumnSortable:i,toolbarBreakpoint:"lg",filters:{Username:{type:"search",chips:a,onSearch:v,onRemoveChip:y,onRemoveGroup:b,validate:e=>/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e),errorMessage:"Invalid string"}},actions:[...l?[{label:"Assign user(s)",onClick:f,isPrimary:!0}]:[],{label:"Remove user(s)",onClick:()=>p(),isPrimary:!1}],itemCount:t,page:n,perPage:r,onPageChange:d,onClearAllFilters:j,ariaLabel:"Seats Administration users",isFiltered:C,isRowChecked:({row:e})=>c(e),onCheck:({row:e},t)=>u(e,t),emptyStateNoData:k.jsx(pe,{totalSeats:s||0,onAddUsers:f}),emptyStateNoResults:k.jsx(se,{onClearAllFilters:j})})},ye={actionProps:{style:{zIndex:9999}}},be=({users:e,onConfirm:t,onCancel:n})=>{const[r,a]=(0,d.useState)(e.slice(0,5)),[s,o]=(0,d.useState)(5),[i,l]=(0,d.useState)(1);return k.jsxs(m.Modal,{title:"Remove users",titleIconVariant:"warning",isOpen:!0,variant:"small",actions:[k.jsx(m.Button,{variant:"danger",onClick:()=>t(),children:"Remove user(s)"}),k.jsx(m.Button,{variant:"link",onClick:()=>n(),children:"Cancel"})],onClose:n,children:["Are you sure you want to remove the user(s) below from Project Wisdom",e.length>5?k.jsxs(k.Fragment,{children:[k.jsxs(O.TableComposable,{variant:"compact",children:[k.jsx(O.Thead,{children:k.jsx(O.Tr,{children:k.jsx(O.Th,{children:"Name"})})}),k.jsx(O.Tbody,{children:r.map((e=>k.jsx(O.Tr,{children:k.jsx(O.Td,{dataLabel:"Name",children:e.name})},e.id)))})]}),k.jsx(m.Pagination,{isCompact:!0,perPageComponent:"button",itemCount:e.length,perPage:s,page:i,variant:m.PaginationVariant.bottom,perPageOptions:[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20}],onPerPageSelect:(t,n)=>{o(n),a(e.slice((i-1)*n,i*n))},onSetPage:(t,n)=>{l(n),a(e.slice((n-1)*s,n*s))}})]}):k.jsx("p",{className:"pf-u-pt-md",children:e.map(((t,n)=>k.jsxs(k.Fragment,{children:[k.jsx("b",{children:t.name}),n!==e.length-1?", ":""]})))})]})},je=({user:e,onSuccess:t,onError:n})=>{var r,a,s,o,i,l,c,u,p,f;const g=(0,h.useHistory)(),[x,w]=(0,d.useState)([]),[S,O]=(0,d.useState)(!1),{page:P,perPage:U,setPagination:R,setPaginationQuery:_}=(0,v.J)(),A=(0,d.useCallback)((()=>_(1,U)),[U,_]),E=(0,y.R)("username",A),I=re(),T=(0,j.NL)(),$=(0,b.a)({queryKey:["subscriptions"],queryFn:()=>I.get(e)}),F=(0,b.a)({queryKey:["users",{page:P,perPage:U,usernames:E.chips}],queryFn:()=>I.seats(e)}),N=((null==(r=$.data)?void 0:r.available)||0)<0,q=Math.abs((null==(a=$.data)?void 0:a.available)||0),B=((null==(s=$.data)?void 0:s.total)||0)>0&&0===(null==(o=$.data)?void 0:o.available),{mutate:H}=(0,C.D)((async t=>{await I.unAssign(e,t.map((({id:e})=>e))),O(!1),w([])}),{onSuccess:()=>{t&&t("Successfully removed users"),T.invalidateQueries({queryKey:["users"]})},onError:e=>{n&&n("there was an error: "+e)}});return k.jsxs(m.Page,{children:[k.jsx(me,{totalSeats:(null==(i=$.data)?void 0:i.total)||0,availableSeats:(null==(l=$.data)?void 0:l.available)||0}),0===(null==(c=$.data)?void 0:c.total)&&k.jsx(de,{}),N&&q&&k.jsx(he,{usersToRemove:q,onOk:()=>g.push("/remove-users")}),S&&k.jsx(be,{users:x,onConfirm:()=>H(x),onCancel:()=>O(!1)}),k.jsxs(m.PageSection,{isFilled:!0,children:[B?k.jsx(m.Alert,{title:"There are 0 seats left in your organization's subscription. Contact Red Hat to manage your Seats Administration license.",variant:"warning",isInline:!0}):null,0!==(null==(u=$.data)?void 0:u.total)&&k.jsx(ve,{totalSeats:null==(p=$.data)?void 0:p.total,users:F.data,itemCount:null==(f=F.data)?void 0:f.length,canAddUser:!B,page:P,perPage:U,onPageChange:R,usernames:E.chips,onSearchUsername:E.add,onRemoveUsernameChip:E.remove,onRemoveUsernameChips:E.clear,onClearAllFilters:E.clear,getUrlForUser:e=>`#${e.name}`,onAddUser:()=>{g.push("/add-users")},isUserChecked:e=>x.includes(e),onCheckUser:(e,t)=>{w(t?[...x,e]:x.filter((t=>t!==e)))},onRemoveSeat:e=>{e&&w([e]),O(!0)}})]})]})},Ce=({user:e,onSuccess:t,onError:n})=>{var r,a,s;const o=(0,h.useHistory)(),i=re(),l=(0,b.a)({queryKey:["subscriptions"],queryFn:()=>i.get(e)}),{page:c,perPage:u,setPagination:p,setPaginationQuery:f}=(0,v.J)(),g=(0,d.useCallback)((()=>f(1,u)),[u,f]),x=(0,y.R)("username",g),w=(0,j.NL)(),S=(0,b.a)({queryKey:["assignedUsers",{page:c,perPage:u,usernames:x.chips}],queryFn:()=>i.seats(e)}),[O,P]=(0,d.useState)([]),U=((null==(r=l.data)?void 0:r.total)||0)-((null==(a=l.data)?void 0:a.available)||0),{mutate:R,isLoading:_}=(0,C.D)((()=>(P([]),i.unAssign(e,O))),{onSuccess:()=>{t("Successfully removed users"),w.invalidateQueries({queryKey:["users","assignedUsers"]})},onError:e=>{n("there was an error: "+e)}}),A=()=>o.push("/");return k.jsx(m.Modal,{isOpen:!0,title:`Remove ${U} users from their assigned seats`,variant:"medium",onClose:A,actions:[k.jsx(m.Button,{onClick:()=>R(),isDisabled:O.length>U,isLoading:_,children:"Remove"}),k.jsx(m.Button,{onClick:A,variant:m.ButtonVariant.link,isDisabled:_,children:"Cancel"})],children:k.jsx(le,{users:S.data,itemCount:null==(s=S.data)?void 0:s.length,page:c,perPage:u,onPageChange:p,usernames:x.chips,onSearchUsername:x.add,onRemoveUsernameChip:x.remove,onRemoveUsernameChips:x.clear,onClearAllFilters:x.clear,isUserChecked:e=>O.includes(e.id),onCheckUser:(e,t)=>{P(t?[...O,e.id]:O.filter((t=>t!==e.id)))}})})};var xe=n(4082),we=function(){return we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},we.apply(this,arguments)},Se=function(){var e=(0,xe.I0)(),t=function(t,n){void 0===n&&(n="success"),e((0,l.wN)({variant:n,title:t}))},n=function(e){return t(e,"danger")},r={orgId:"o1",serviceId:"smarts",token:(0,u.Z)().auth.getToken};return(0,o.jsx)(d.Suspense,we({fallback:(0,o.jsx)(m.Bullseye,{children:(0,o.jsx)(m.Spinner,{})})},{children:(0,o.jsx)(ae,we({serviceName:"entitlements",baseUrl:"https://console.stage.redhat.com/api/entitlements/v1/"},{children:(0,o.jsx)(h.BrowserRouter,we({basename:(0,p.eb)(window.location.pathname)+"/seats"},{children:(0,o.jsxs)(h.Switch,{children:[(0,o.jsxs)(h.Route,we({path:"/add-users"},{children:[(0,o.jsx)(je,{user:r}),(0,o.jsx)(ce,{user:r,onSuccess:t,onError:n})]})),(0,o.jsxs)(h.Route,we({path:"/remove-users"},{children:[(0,o.jsx)(je,{user:r}),(0,o.jsx)(Ce,{user:r,onSuccess:t,onError:n})]})),(0,o.jsx)(h.Route,we({path:"/"},{children:(0,o.jsx)(je,{user:r,onSuccess:t,onError:n})})),(0,o.jsx)(h.Route,{children:(0,o.jsx)(f.Z,{})})]})}))}))}))};const Oe=function(){var e=(0,u.Z)(),t=e.updateDocumentTitle,n=e.on,r=(0,h.useHistory)();return(0,d.useEffect)((function(){(0,c.JH)().register({notifications:l.ee}),t("Starter app");var e=n("APP_NAVIGATION",(function(e){console.dir(e),e.navId&&r.push(e.navId)}));return function(){e&&e()}}),[]),(0,o.jsxs)(d.Fragment,{children:[(0,o.jsx)(i.ZP,{}),(0,o.jsx)(Se,{})]})}},355:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(9961),a=n(1935),s=n.n(a),o=n(1236),i=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.JH)({},i([s(),(0,o.ZP)({errorDescriptionKey:["detail","stack"]})],e,!0))}}}]);
//# sourceMappingURL=../sourcemaps/813.28629ce8d217fd296f3e645bcd0421ad.js.map